function init(e){element=e,document.getElementById("graphicLevel").innerHTML=graphicLevel,displayXSDGraphic(e,graphicContext)}function levelSet(e,t){e<1&&(e=1),e>6&&(e=6),graphicLevel=e,document.getElementById("graphicLevel").innerHTML=graphicLevel}function displayGraphicContext(){null!=graphicContext?document.getElementById("graphicContext").innerHTML="Context of: "+graphicContext:document.getElementById("graphicContext").innerHTML=""}function changeLevel(e){levelSet(graphicLevel+e),"master"==activeView&&displayXSDGraphic(element,null),"flat"==activeView&&displayXSDGraphicFlat(element,schema)}function loadXMLDoc(e){var t;document.implementation&&document.implementation.createDocument?t=document.implementation.createDocument("","",null):alert("Your browser cannot handle this script");try{return t.async=!1,t.load(e),t}catch(l){try{var n=new top.XMLHttpRequest;return n.open("GET",e,!1),n.send(null),t=n.responseXML.documentElement}catch(e){error=e.message}}}function displayXSDGraphic(e,t){if(activeView="master",null==t&&(graphicContext=null,displayGraphicContext(),wx=window,window.parent.frames[1]&&window.parent.frames[1].name&&window.parent.frames[1].setGraphicContext(null)),null!=graphicContext)displayXSDGraphicFlat(e,graphicContext);else if(document.implementation&&document.implementation.createDocument&&"undefined"!=typeof XSLTProcessor){xml=loadXMLDoc("../xml_schema_viewer/xsd_graphic.xml");let t=window.location.origin,n=`<start-element>${e}</start-element><max-level>${graphicLevel}</max-level><origin>${t}</origin>`;top.xml=xml,xml.innerHTML=n;let l=document.getElementById("XSDGraphic"),a='<?xml version="1.0" encoding="UTF-8"?><?xml-stylesheet type="text/xsl" href="http://localhost:1020/xml_schema_viewer/xsd_graphic.xsl"?>'+xml.outerHTML,r=new Blob([a],{type:"text/xml"}),o=URL.createObjectURL(r),c=document.createElement("iframe");return c.name="xsdgraph",c.style.border="none",l.appendChild(c),c.src=o,console.log(c.contentDocument,c.contentDocument.firstElementChild),c.contentDocument.addEventListener("load",()=>{console.log("aa"),c.style.width="100%",c.style.height=c.contentDocument.body.scrollHeight+"px"}),c.style.width="100%",void(c.style.height=c.contentDocument.body.scrollHeight+"px")}}function displayXSDGraphicFlat(e,t){if(activeView="flat",graphicContext=t,displayGraphicContext(),window.parent.frames[1].setGraphicContext(t),schema=t,document.implementation&&document.implementation.createDocument&&"undefined"!=typeof XSLTProcessor)n=loadXMLDoc("../xml_schema_viewer/xsd_graphic_flat.xml"),l=loadXMLDoc("../xml_schema_viewer/xsd_graphic_flat.xsl"),xsltProcessor=new XSLTProcessor,xsltProcessor.importStylesheet(l),xsltProcessor.setParameter(null,"startElement",e),xsltProcessor.setParameter(null,"maxLevel",graphicLevel),xsltProcessor.setParameter(null,"flatSchema",t),resultDocument=xsltProcessor.transformToFragment(n,document),document.getElementById("XSDGraphic").innerHTML="",document.getElementById("XSDGraphic").appendChild(resultDocument);else try{var n=new ActiveXObject("Microsoft.XMLDOM"),l=new ActiveXObject("MSXML2.FreeThreadedDOMDocument");n.load("../xml_schema_viewer/xsd_graphic_flat.xml"),l.load("../xml_schema_viewer/xsd_graphic_flat.xsl");var a=new ActiveXObject("Msxml2.XSLTemplate");a.stylesheet=l;var r=a.createProcessor();r.input=n,r.addParameter("startElement",e),r.addParameter("maxLevel",graphicLevel),r.addParameter("flatSchema",t),r.transform(),document.getElementById("XSDGraphic").innerHTML=r.output}catch(e){return"undefined"!=typeof console&&console.log("transformxml: no browser support"),null}}graphicLevel=2,activeView="master",element=null,schema=null,graphicContext=null;