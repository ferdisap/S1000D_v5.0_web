var graphicLevel=2,activeView="master",element=null,schema=null,graphicContext=null;let isProductionEnv_x="localhost"!==top.location.hostname,origin_suffix_x="/S1000D_v5.0_web",originWeb_x=isProductionEnv_x?top.location.origin+origin_suffix_x:top.location.origin;function init(e){element=e,document.getElementById("graphicLevel").innerHTML=graphicLevel,displayXSDGraphic(e,graphicContext)}function levelSet(e,t){e<1&&(e=1),e>6&&(e=6),graphicLevel=e,document.getElementById("graphicLevel").innerHTML=graphicLevel}function displayGraphicContext(){document.getElementById("graphicContext").innerHTML=null!=graphicContext?"Context of: "+graphicContext:""}function changeLevel(e){levelSet(graphicLevel+e),"master"==activeView&&displayXSDGraphic(element,null),"flat"==activeView&&displayXSDGraphicFlat(element,schema)}function loadXMLDoc(e){var t;document.implementation&&document.implementation.createDocument?t=document.implementation.createDocument("","",null):alert("Your browser cannot handle this script");try{return t.async=!1,t.load(e),t}catch(o){try{var n=new top.XMLHttpRequest;return n.open("GET",e,!1),n.send(null),t=n.responseXML.documentElement}catch(e){error=e.message}}}function displayXSDGraphic(e,t){if(activeView="master",null==t&&(graphicContext=null,displayGraphicContext(),wx=window,window.parent.frames[1]&&window.parent.frames[1].name&&window.parent.frames[1].setGraphicContext(null)),null!=graphicContext)displayXSDGraphicFlat(e,graphicContext);else if(document.implementation&&document.implementation.createDocument&&"undefined"!=typeof XSLTProcessor){xml=loadXMLDoc(originWeb_x+"/xml_schema_viewer/xsd_graphic.xml");let t=window.location.origin,n=`<start-element>${e}</start-element><max-level>${graphicLevel}</max-level><origin>${t}</origin>`;xml.innerHTML=n;let o=document.getElementById("XSDGraphic"),r='<?xml version="1.0" encoding="UTF-8"?><?xml-stylesheet type="text/xsl" href="http://localhost:1020/xml_schema_viewer/xsd_graphic.xsl"?>'+xml.outerHTML,l=new Blob([r],{type:"text/xml"}),a=URL.createObjectURL(l),i=document.createElement("iframe");return i.name="xsdgraph",i.style.border="none",o.appendChild(i),i.src=a,console.log(i.contentDocument,i.contentDocument.firstElementChild),i.contentDocument.addEventListener("load",()=>{console.log("aa"),i.style.width="100%",i.style.height=i.contentDocument.body.scrollHeight+"px"}),i.style.width="100%",void(i.style.height=i.contentDocument.body.scrollHeight+"px")}}function displayXSDGraphicFlat(e,t){if(activeView="flat",graphicContext=t,displayGraphicContext(),window.parent.frames[1].setGraphicContext(t),schema=t,document.implementation&&document.implementation.createDocument&&"undefined"!=typeof XSLTProcessor)n=loadXMLDoc(originWeb_x+"/xml_schema_viewer/xsd_graphic_flat.xml"),o=loadXMLDoc(originWeb_x+"/xml_schema_viewer/xsd_graphic_flat.xsl"),xsltProcessor=new XSLTProcessor,xsltProcessor.importStylesheet(o),xsltProcessor.setParameter(null,"startElement",e),xsltProcessor.setParameter(null,"maxLevel",graphicLevel),xsltProcessor.setParameter(null,"flatSchema",t),resultDocument=xsltProcessor.transformToFragment(n,document),document.getElementById("XSDGraphic").innerHTML="",document.getElementById("XSDGraphic").appendChild(resultDocument);else try{var n=new ActiveXObject("Microsoft.XMLDOM"),o=new ActiveXObject("MSXML2.FreeThreadedDOMDocument");n.load("../xml_schema_viewer/xsd_graphic_flat.xml"),o.load("../xml_schema_viewer/xsd_graphic_flat.xsl");var r=new ActiveXObject("Msxml2.XSLTemplate");r.stylesheet=o;var l=r.createProcessor();l.input=n,l.addParameter("startElement",e),l.addParameter("maxLevel",graphicLevel),l.addParameter("flatSchema",t),l.transform(),document.getElementById("XSDGraphic").innerHTML=l.output}catch(e){return"undefined"!=typeof console&&console.log("transformxml: no browser support"),null}}